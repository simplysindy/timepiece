# Configuration for watch data preparation pipeline

# Data paths configuration
data:
  input_dir: data/watches
  output_dir: data/processed
  max_files: null  # Process all files if null, or limit to specific number
  file_pattern: "*.csv"  # File pattern to match watch files

# Output structure configuration
output:
  save_individual: true  # Save each watch separately
  save_summary: true     # Generate summary metadata file
  subdirs:
    processed: ""         # No subdirectory - save directly in data/processed/
    summary: summary      # Subdirectory for summary files
  file_format: csv       # Output format (csv or parquet)
  include_index: true    # Include date index in output files

# Data processing configuration
processing:
  frequency: D                    # Resample frequency (D=daily, W=weekly)
  min_data_points: 30            # Minimum data points required per watch
  interpolation_method: linear    # Method: linear, cubic, forward, backward
  fill_limit: 5                  # Maximum consecutive values to interpolate

  # Outlier detection
  remove_outliers: false          # Toggle outlier filtering entirely
  outlier_method: iqr            # Method: iqr, zscore, isolation_forest
  outlier_threshold: 3.0         # Threshold for outlier detection
  handle_outliers: interpolate   # How to handle: remove, interpolate, cap

  # Data quality
  max_missing_percent: 20        # Maximum % of missing data allowed
  remove_duplicates: true        # Remove duplicate timestamps
  sort_index: true              # Ensure data is sorted by date

# Feature engineering configuration
features:
  # Lag features
  lag_periods: [5, 7, 14, 30]

  # Rolling window features
  rolling_windows: [5, 7, 14, 30]
  rolling_stats: [mean, std]
  # rolling_stats: [mean, std, min, max, median]

  # Price change periods (for momentum features)
  price_change_periods: [5, 7, 14, 30]
  # price_change_periods: [1, 3, 5, 7, 14, 21, 30]

  # Technical indicators
  include_technical: true
  technical_indicators:
    - ema        # Keep only EMA (remove SMA - duplicates rolling_mean)
    - rsi        # Relative strength index
    - bollinger  # Bollinger bands

  # Watch-specific features
  include_watch_features: true
  watch_features:
    - luxury_tier
    - seasonality
    - price_stability
    - brand_features
    # Note: Ensure luxury volatility features don't duplicate base volatility

  # Time-based features - REDUCED redundant features
  include_temporal: true
  temporal_features:
    - day_of_week
    - month
    - quarter
    - is_weekend

  # Target variable configuration
  target_shift: -1  # Days to shift for target variable (negative = future)

# Watch-specific configuration
watch:
  price_column: "price(SGD)"
  date_column: "date"

  # Luxury tier thresholds (in SGD)
  luxury_tiers:
    entry: [0, 5000]
    mid: [5000, 20000]
    high: [20000, 100000]
    ultra: [100000, null]

  # Brand categorization
  premium_brands:
    - rolex
    - patek_philippe
    - audemars_piguet
    - omega
    - cartier
    - hublot

# Processing behavior
behavior:
  continue_on_error: true      # Continue processing other watches if one fails
  verbose: true                # Detailed logging
  validate_output: true        # Validate processed data before saving
  overwrite_existing: true     # Overwrite existing processed files

# Summary statistics to generate
summary:
  include_stats:
    - total_records
    - date_range
    - missing_data_percent
    - avg_price
    - price_volatility
    - price_trend
    - data_quality_score
    - features_count

  # Additional metadata
  include_metadata:
    - brand
    - model
    - luxury_tier
    - processing_timestamp
